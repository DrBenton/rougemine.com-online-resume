parameters:
    data.path: '%app.dir%/src/Rougemine/Resume/resources/data'
    translations.path: '%app.dir%/src/Rougemine/Resume/resources/translations,%data.path%'
    views.path: '%app.dir%/src/Rougemine/Resume/resources/views'

services:

    #
    # View vars presenters generator
    #
    app.view.presenters_generator:
        class: Rougemine\Resume\View\PresentersGenerator
        arguments:
            - '@app.generator.presenter.document_properties'
            - '@app.generator.presenter.me_properties'
            - '@app.generator.presenter.technologies'
            - '@app.generator.presenter.jobs_experience'
            - '@app.generator.presenter.works'

    #
    # View vars presenters
    #
    app.generator.presenter.document_properties:
        class: Rougemine\Resume\Generator\Presenter\DocumentPropertiesGenerator
        arguments:
            - '@app.translator'
            - '%app.prodMode%'
            - '%app.google.analytics.trackingCode%'
        public: false

    app.generator.presenter.me_properties:
        class: Rougemine\Resume\Generator\Presenter\MePropertiesGenerator
        arguments:
            - '@app.translator'
        public: false

    app.generator.presenter.technologies:
        class: Rougemine\Resume\Generator\Presenter\TechnologiesGenerator
        arguments:
            - '%data.path%/technologies.yml'
        public: false

    app.generator.presenter.jobs_experience:
        class: Rougemine\Resume\Generator\Presenter\JobsExperienceGenerator
        arguments:
            - '%data.path%/jobs-experience.${language}.yml'
        public: false

    app.generator.presenter.works:
        class: Rougemine\Resume\Generator\Presenter\WorksGenerator
        arguments:
            - '%data.path%/works.${language}.yml'
        public: false

    #
    # Translation stuff
    #
    app.translator:
        class: Symfony\Component\Translation\Translator
        arguments:
            - 'en'
        calls:
            - [addLoader, ['yaml', '@app.translation.loader']]

    app.translation.loader:
        class: Symfony\Component\Translation\Loader\YamlFileLoader
        public: false

    #
    # Twig extensions
    #
    app.twig.extension.resume:
        class: Rougemine\Resume\View\Twig\ResumeExtension
        arguments:
            - '@app.translator'
            - '@app.figlet'

    app.figlet:
        class: Povils\Figlet\Figlet
